{"ast":null,"code":"import _slicedToArray from\"C:/Users/Tilwani's/Desktop/The-Dilemma/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Modal}from\"@mui/material\";import{useState}from\"react\";import{CommentModal}from\"..\";import{useAuth,usePosts,useUsers}from\"../../index\";import{FaEdit,FaTrash,FaUserPlus,RiUserUnfollowFill}from\"../../utils/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CommentOptionsModal=function CommentOptionsModal(_ref){var comment=_ref.comment,postId=_ref.postId,setShowOptions=_ref.setShowOptions;var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var _useUsers=useUsers(),users=_useUsers.usersState.users,unfollowUserHandler=_useUsers.unfollowUserHandler,followUserHandler=_useUsers.followUserHandler,handleBtnsClick=_useUsers.handleBtnsClick;var _usePosts=usePosts(),deleteCommentHandler=_usePosts.deleteCommentHandler;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showCommentModal=_useState2[0],setShowCommentModal=_useState2[1];var userToFollow=users.find(function(user){return user.username===comment.username;});var userAlreadyFollowing=userToFollow.followers.find(function(user){return user.username===currentUser.username;});return/*#__PURE__*/_jsxs(\"div\",{className:\"absolute flex flex-col right-1 top-7 w-max rounded-md shadow-lg border border-darkGrey bg-lighterPrimary dark:bg-darkGrey\",children:[(comment===null||comment===void 0?void 0:comment.username)===(currentUser===null||currentUser===void 0?void 0:currentUser.username)?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"py-2 px-4 text-left cursor-pointer rounded-md hover:bg-lightPrimary dark:hover:bg-darkPrimary flex items-center justify-center\",onClick:function onClick(e){e.stopPropagation();setShowCommentModal(true);},children:[/*#__PURE__*/_jsx(FaEdit,{className:\"mr-2\"}),\"Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"py-2 px-4 text-left cursor-pointer rounded-md hover:bg-lightPrimary dark:hover:bg-darkPrimary text-red flex items-center justify-center\",onClick:function onClick(e){e.stopPropagation();deleteCommentHandler(postId,comment===null||comment===void 0?void 0:comment._id);setShowOptions(function(prev){return!prev;});},children:[/*#__PURE__*/_jsx(FaTrash,{className:\"mr-2 \"}),\"Delete\"]})]}):/*#__PURE__*/_jsx(\"button\",{className:\"py-2 px-4 text-left cursor-pointer rounded-md hover:bg-lightPrimary dark:hover:bg-darkPrimary flex items-center justify-center\",onClick:function onClick(e){e.stopPropagation();userAlreadyFollowing?handleBtnsClick(400,unfollowUserHandler,userToFollow===null||userToFollow===void 0?void 0:userToFollow._id):handleBtnsClick(400,followUserHandler,userToFollow===null||userToFollow===void 0?void 0:userToFollow._id);setShowOptions(false);},children:userAlreadyFollowing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RiUserUnfollowFill,{className:\"mr-2 \"}),\" Unfollow\",\" \"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FaUserPlus,{className:\"mr-2 \"}),\"Follow\"]})}),/*#__PURE__*/_jsx(Modal,{open:showCommentModal,onClose:function onClose(){return setShowCommentModal(false);},children:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(CommentModal,{comment:comment,postId:postId,setShowOptions:setShowOptions,setShowCommentModal:setShowCommentModal})})})]});};export{CommentOptionsModal};","map":{"version":3,"names":["Modal","useState","CommentModal","useAuth","usePosts","useUsers","FaEdit","FaTrash","FaUserPlus","RiUserUnfollowFill","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CommentOptionsModal","_ref","comment","postId","setShowOptions","_useAuth","currentUser","_useUsers","users","usersState","unfollowUserHandler","followUserHandler","handleBtnsClick","_usePosts","deleteCommentHandler","_useState","_useState2","_slicedToArray","showCommentModal","setShowCommentModal","userToFollow","find","user","username","userAlreadyFollowing","followers","className","children","onClick","e","stopPropagation","_id","prev","open","onClose"],"sources":["C:/Users/Tilwani's/Desktop/The-Dilemma/src/components/CommentOptionsModal/CommentOptionsModal.jsx"],"sourcesContent":["import { Modal } from \"@mui/material\";\nimport { useState } from \"react\";\nimport { CommentModal } from \"..\";\nimport { useAuth, usePosts, useUsers } from \"../../index\";\nimport {\n  FaEdit,\n  FaTrash,\n  FaUserPlus,\n  RiUserUnfollowFill,\n} from \"../../utils/icons\";\n\nconst CommentOptionsModal = ({ comment, postId, setShowOptions }) => {\n  const { currentUser } = useAuth();\n  const {\n    usersState: { users },\n    unfollowUserHandler,\n    followUserHandler,\n    handleBtnsClick,\n  } = useUsers();\n  const { deleteCommentHandler } = usePosts();\n\n  const [showCommentModal, setShowCommentModal] = useState(false);\n\n  const userToFollow = users.find((user) => user.username === comment.username);\n\n  const userAlreadyFollowing = userToFollow.followers.find(\n    (user) => user.username === currentUser.username\n  );\n\n  return (\n    <div className=\"absolute flex flex-col right-1 top-7 w-max rounded-md shadow-lg border border-darkGrey bg-lighterPrimary dark:bg-darkGrey\">\n      {comment?.username === currentUser?.username ? (\n        <>\n          <button\n            className=\"py-2 px-4 text-left cursor-pointer rounded-md hover:bg-lightPrimary dark:hover:bg-darkPrimary flex items-center justify-center\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowCommentModal(true);\n            }}\n          >\n            <FaEdit className=\"mr-2\" />\n            Edit\n          </button>\n          <button\n            className=\"py-2 px-4 text-left cursor-pointer rounded-md hover:bg-lightPrimary dark:hover:bg-darkPrimary text-red flex items-center justify-center\"\n            onClick={(e) => {\n              e.stopPropagation();\n              deleteCommentHandler(postId, comment?._id);\n              setShowOptions((prev) => !prev);\n            }}\n          >\n            <FaTrash className=\"mr-2 \" />\n            Delete\n          </button>\n        </>\n      ) : (\n        <button\n          className=\"py-2 px-4 text-left cursor-pointer rounded-md hover:bg-lightPrimary dark:hover:bg-darkPrimary flex items-center justify-center\"\n          onClick={(e) => {\n            e.stopPropagation();\n            userAlreadyFollowing\n              ? handleBtnsClick(400, unfollowUserHandler, userToFollow?._id)\n              : handleBtnsClick(400, followUserHandler, userToFollow?._id);\n            setShowOptions(false);\n          }}\n        >\n          {userAlreadyFollowing ? (\n            <>\n              <RiUserUnfollowFill className=\"mr-2 \" /> Unfollow{\" \"}\n            </>\n          ) : (\n            <>\n              <FaUserPlus className=\"mr-2 \" />\n              Follow\n            </>\n          )}\n        </button>\n      )}\n\n      <Modal open={showCommentModal} onClose={() => setShowCommentModal(false)}>\n        <>\n          <CommentModal\n            comment={comment}\n            postId={postId}\n            setShowOptions={setShowOptions}\n            setShowCommentModal={setShowCommentModal}\n          />\n        </>\n      </Modal>\n    </div>\n  );\n};\n\nexport { CommentOptionsModal };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}