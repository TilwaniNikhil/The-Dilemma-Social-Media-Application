{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tilwani's\\\\Desktop\\\\The-Dilemma\\\\src\\\\contexts\\\\auth-context.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useState } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { loginService, signupService } from \"../services/authServices\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const localStorageToken = JSON.parse(localStorage.getItem(\"loginDetails\"));\n  const [token, setToken] = useState((localStorageToken === null || localStorageToken === void 0 ? void 0 : localStorageToken.token) || \"\");\n  const [currentUser, setCurrentUser] = useState(localStorageToken === null || localStorageToken === void 0 ? void 0 : localStorageToken.user);\n  const [loading, setIsLoading] = useState(false);\n  const loginHandler = async _ref2 => {\n    let {\n      username,\n      password\n    } = _ref2;\n    setIsLoading(true);\n    try {\n      const response = await loginService(username, password);\n      const {\n        status,\n        data: {\n          encodedToken,\n          foundUser\n        }\n      } = response;\n      if (status === 200) {\n        var _location$state, _location$state$from;\n        localStorage.setItem(\"loginDetails\", JSON.stringify({\n          token: encodedToken,\n          user: foundUser\n        }));\n        setToken(encodedToken);\n        setCurrentUser(foundUser);\n        toast.success(`Welcome back, ${foundUser.firstName}!`, {\n          icon: \"ðŸ‘‹\"\n        });\n        navigate((location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$from = _location$state.from) === null || _location$state$from === void 0 ? void 0 : _location$state$from.pathname) || \"/\", {\n          replace: true\n        });\n      }\n    } catch (error) {\n      console.error(error);\n      toast.error(\"Please enter correct details.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const signupHandler = async _ref3 => {\n    let {\n      firstName,\n      lastName,\n      username,\n      password\n    } = _ref3;\n    setIsLoading(true);\n    try {\n      const response = await signupService(firstName, lastName, username, password);\n      const {\n        status,\n        data: {\n          createdUser,\n          encodedToken\n        }\n      } = response;\n      if (status === 201) {\n        localStorage.setItem(\"loginDetails\", JSON.stringify({\n          token: encodedToken,\n          user: createdUser\n        }));\n        setToken(encodedToken);\n        setCurrentUser(createdUser);\n        toast.success(`Hi, ${createdUser.firstName}!`, {\n          icon: \"ðŸ‘‹\"\n        });\n        navigate(\"/\", {\n          replace: true\n        });\n      }\n    } catch (error) {\n      console.error(error);\n      toast.error(\"Something went wrong! Please try again.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const logoutHandler = () => {\n    localStorage.removeItem(\"loginDetails\");\n    setToken(null);\n    setCurrentUser(null);\n    toast.success(\"Logged out successfully!\");\n    navigate(\"/auth/login\");\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      token,\n      currentUser,\n      setCurrentUser,\n      loginHandler,\n      loading,\n      logoutHandler,\n      signupHandler\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"LG08p5xWxGpeH07OZGqgbzXhkos=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useState","toast","useLocation","useNavigate","loginService","signupService","jsxDEV","_jsxDEV","AuthContext","AuthProvider","_ref","_s","children","navigate","location","localStorageToken","JSON","parse","localStorage","getItem","token","setToken","currentUser","setCurrentUser","user","loading","setIsLoading","loginHandler","_ref2","username","password","response","status","data","encodedToken","foundUser","_location$state","_location$state$from","setItem","stringify","success","firstName","icon","state","from","pathname","replace","error","console","signupHandler","_ref3","lastName","createdUser","logoutHandler","removeItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["C:/Users/Tilwani's/Desktop/The-Dilemma/src/contexts/auth-context.js"],"sourcesContent":["import { createContext, useContext, useState } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { loginService, signupService } from \"../services/authServices\";\n\nexport const AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const localStorageToken = JSON.parse(localStorage.getItem(\"loginDetails\"));\n\n  const [token, setToken] = useState(localStorageToken?.token || \"\");\n  const [currentUser, setCurrentUser] = useState(localStorageToken?.user);\n  const [loading, setIsLoading] = useState(false);\n\n  const loginHandler = async ({ username, password }) => {\n    setIsLoading(true);\n    try {\n      const response = await loginService(username, password);\n      const {\n        status,\n        data: { encodedToken, foundUser },\n      } = response;\n      if (status === 200) {\n        localStorage.setItem(\n          \"loginDetails\",\n          JSON.stringify({ token: encodedToken, user: foundUser })\n        );\n        setToken(encodedToken);\n        setCurrentUser(foundUser);\n        toast.success(`Welcome back, ${foundUser.firstName}!`, { icon: \"ðŸ‘‹\" });\n        navigate(location?.state?.from?.pathname || \"/\", { replace: true });\n      }\n    } catch (error) {\n      console.error(error);\n      toast.error(\"Please enter correct details.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const signupHandler = async ({ firstName, lastName, username, password }) => {\n    setIsLoading(true);\n    try {\n      const response = await signupService(\n        firstName,\n        lastName,\n        username,\n        password\n      );\n      const {\n        status,\n        data: { createdUser, encodedToken },\n      } = response;\n      if (status === 201) {\n        localStorage.setItem(\n          \"loginDetails\",\n          JSON.stringify({ token: encodedToken, user: createdUser })\n        );\n        setToken(encodedToken);\n        setCurrentUser(createdUser);\n        toast.success(`Hi, ${createdUser.firstName}!`, {\n          icon: \"ðŸ‘‹\",\n        });\n        navigate(\"/\", { replace: true });\n      }\n    } catch (error) {\n      console.error(error);\n      toast.error(\"Something went wrong! Please try again.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const logoutHandler = () => {\n    localStorage.removeItem(\"loginDetails\");\n    setToken(null);\n    setCurrentUser(null);\n    toast.success(\"Logged out successfully!\");\n    navigate(\"/auth/login\");\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        token,\n        currentUser,\n        setCurrentUser,\n        loginHandler,\n        loading,\n        logoutHandler,\n        signupHandler,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => useContext(AuthContext);\n"],"mappings":";;;AAAA,SAASA,aAAa,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,SAASC,YAAY,EAAEC,aAAa,QAAQ,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvE,OAAO,MAAMC,WAAW,gBAAGV,aAAa,CAAC,CAAC;AAE1C,OAAO,MAAMW,YAAY,GAAGC,IAAA,IAAkB;EAAAC,EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC,GAAAF,IAAA;EACvC,MAAMG,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAC9B,MAAMW,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAE9B,MAAMa,iBAAiB,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAAC;EAE1E,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAC,CAAAe,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAEK,KAAK,KAAI,EAAE,CAAC;EAClE,MAAM,CAACE,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAACe,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAES,IAAI,CAAC;EACvE,MAAM,CAACC,OAAO,EAAEC,YAAY,CAAC,GAAG1B,QAAQ,CAAC,KAAK,CAAC;EAE/C,MAAM2B,YAAY,GAAG,MAAAC,KAAA,IAAkC;IAAA,IAA3B;MAAEC,QAAQ;MAAEC;IAAS,CAAC,GAAAF,KAAA;IAChDF,YAAY,CAAC,IAAI,CAAC;IAClB,IAAI;MACF,MAAMK,QAAQ,GAAG,MAAM3B,YAAY,CAACyB,QAAQ,EAAEC,QAAQ,CAAC;MACvD,MAAM;QACJE,MAAM;QACNC,IAAI,EAAE;UAAEC,YAAY;UAAEC;QAAU;MAClC,CAAC,GAAGJ,QAAQ;MACZ,IAAIC,MAAM,KAAK,GAAG,EAAE;QAAA,IAAAI,eAAA,EAAAC,oBAAA;QAClBnB,YAAY,CAACoB,OAAO,CAClB,cAAc,EACdtB,IAAI,CAACuB,SAAS,CAAC;UAAEnB,KAAK,EAAEc,YAAY;UAAEV,IAAI,EAAEW;QAAU,CAAC,CACzD,CAAC;QACDd,QAAQ,CAACa,YAAY,CAAC;QACtBX,cAAc,CAACY,SAAS,CAAC;QACzBlC,KAAK,CAACuC,OAAO,CAAE,iBAAgBL,SAAS,CAACM,SAAU,GAAE,EAAE;UAAEC,IAAI,EAAE;QAAK,CAAC,CAAC;QACtE7B,QAAQ,CAAC,CAAAC,QAAQ,aAARA,QAAQ,wBAAAsB,eAAA,GAARtB,QAAQ,CAAE6B,KAAK,cAAAP,eAAA,wBAAAC,oBAAA,GAAfD,eAAA,CAAiBQ,IAAI,cAAAP,oBAAA,uBAArBA,oBAAA,CAAuBQ,QAAQ,KAAI,GAAG,EAAE;UAAEC,OAAO,EAAE;QAAK,CAAC,CAAC;MACrE;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpB9C,KAAK,CAAC8C,KAAK,CAAC,+BAA+B,CAAC;IAC9C,CAAC,SAAS;MACRrB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMuB,aAAa,GAAG,MAAAC,KAAA,IAAuD;IAAA,IAAhD;MAAET,SAAS;MAAEU,QAAQ;MAAEtB,QAAQ;MAAEC;IAAS,CAAC,GAAAoB,KAAA;IACtExB,YAAY,CAAC,IAAI,CAAC;IAClB,IAAI;MACF,MAAMK,QAAQ,GAAG,MAAM1B,aAAa,CAClCoC,SAAS,EACTU,QAAQ,EACRtB,QAAQ,EACRC,QACF,CAAC;MACD,MAAM;QACJE,MAAM;QACNC,IAAI,EAAE;UAAEmB,WAAW;UAAElB;QAAa;MACpC,CAAC,GAAGH,QAAQ;MACZ,IAAIC,MAAM,KAAK,GAAG,EAAE;QAClBd,YAAY,CAACoB,OAAO,CAClB,cAAc,EACdtB,IAAI,CAACuB,SAAS,CAAC;UAAEnB,KAAK,EAAEc,YAAY;UAAEV,IAAI,EAAE4B;QAAY,CAAC,CAC3D,CAAC;QACD/B,QAAQ,CAACa,YAAY,CAAC;QACtBX,cAAc,CAAC6B,WAAW,CAAC;QAC3BnD,KAAK,CAACuC,OAAO,CAAE,OAAMY,WAAW,CAACX,SAAU,GAAE,EAAE;UAC7CC,IAAI,EAAE;QACR,CAAC,CAAC;QACF7B,QAAQ,CAAC,GAAG,EAAE;UAAEiC,OAAO,EAAE;QAAK,CAAC,CAAC;MAClC;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpB9C,KAAK,CAAC8C,KAAK,CAAC,yCAAyC,CAAC;IACxD,CAAC,SAAS;MACRrB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAM2B,aAAa,GAAGA,CAAA,KAAM;IAC1BnC,YAAY,CAACoC,UAAU,CAAC,cAAc,CAAC;IACvCjC,QAAQ,CAAC,IAAI,CAAC;IACdE,cAAc,CAAC,IAAI,CAAC;IACpBtB,KAAK,CAACuC,OAAO,CAAC,0BAA0B,CAAC;IACzC3B,QAAQ,CAAC,aAAa,CAAC;EACzB,CAAC;EAED,oBACEN,OAAA,CAACC,WAAW,CAAC+C,QAAQ;IACnBC,KAAK,EAAE;MACLpC,KAAK;MACLE,WAAW;MACXC,cAAc;MACdI,YAAY;MACZF,OAAO;MACP4B,aAAa;MACbJ;IACF,CAAE;IAAArC,QAAA,EAEDA;EAAQ;IAAA6C,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACjD,EAAA,CA5FWF,YAAY;EAAA,QACNN,WAAW,EACXD,WAAW;AAAA;AAAA2D,EAAA,GAFjBpD,YAAY;AA8FzB,OAAO,MAAMqD,OAAO,GAAGA,CAAA;EAAAC,GAAA;EAAA,OAAMhE,UAAU,CAACS,WAAW,CAAC;AAAA;AAACuD,GAAA,CAAxCD,OAAO;AAAA,IAAAD,EAAA;AAAAG,YAAA,CAAAH,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}