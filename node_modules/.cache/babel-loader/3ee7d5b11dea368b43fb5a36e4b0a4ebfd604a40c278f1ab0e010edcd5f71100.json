{"ast":null,"code":"import { Response } from \"miragejs\";\nimport dayjs from \"dayjs\";\nimport jwt_decode from \"jwt-decode\";\nexport const requiresAuth = function (request) {\n  const encodedToken = request.requestHeaders.authorization;\n  const decodedToken = jwt_decode(encodedToken, process.env.REACT_APP_JWT_SECRET);\n  if (decodedToken) {\n    const user = this.db.users.findBy({\n      username: decodedToken.username\n    });\n    return user;\n  }\n  return new Response(401, {}, {\n    errors: [\"The token is invalid. Unauthorized access error.\"]\n  });\n};\nexport const formatDate = () => dayjs().format(\"YYYY-MM-DDTHH:mm:ssZ\");","map":{"version":3,"names":["Response","dayjs","jwt_decode","requiresAuth","request","encodedToken","requestHeaders","authorization","decodedToken","process","env","REACT_APP_JWT_SECRET","user","db","users","findBy","username","errors","formatDate","format"],"sources":["C:/Users/Tilwani's/Desktop/The-Dilemma/src/backend/utils/authUtils.js"],"sourcesContent":["import { Response } from \"miragejs\";\nimport dayjs from \"dayjs\";\nimport jwt_decode from \"jwt-decode\";\n\nexport const requiresAuth = function (request) {\n  const encodedToken = request.requestHeaders.authorization;\n  const decodedToken = jwt_decode(\n    encodedToken,\n    process.env.REACT_APP_JWT_SECRET\n  );\n  if (decodedToken) {\n    const user = this.db.users.findBy({ username: decodedToken.username });\n    return user;\n  }\n  return new Response(\n    401,\n    {},\n    { errors: [\"The token is invalid. Unauthorized access error.\"] }\n  );\n};\n\nexport const formatDate = () => dayjs().format(\"YYYY-MM-DDTHH:mm:ssZ\");\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,UAAU;AACnC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,UAAU,MAAM,YAAY;AAEnC,OAAO,MAAMC,YAAY,GAAG,SAAAA,CAAUC,OAAO,EAAE;EAC7C,MAAMC,YAAY,GAAGD,OAAO,CAACE,cAAc,CAACC,aAAa;EACzD,MAAMC,YAAY,GAAGN,UAAU,CAC7BG,YAAY,EACZI,OAAO,CAACC,GAAG,CAACC,oBACd,CAAC;EACD,IAAIH,YAAY,EAAE;IAChB,MAAMI,IAAI,GAAG,IAAI,CAACC,EAAE,CAACC,KAAK,CAACC,MAAM,CAAC;MAAEC,QAAQ,EAAER,YAAY,CAACQ;IAAS,CAAC,CAAC;IACtE,OAAOJ,IAAI;EACb;EACA,OAAO,IAAIZ,QAAQ,CACjB,GAAG,EACH,CAAC,CAAC,EACF;IAAEiB,MAAM,EAAE,CAAC,kDAAkD;EAAE,CACjE,CAAC;AACH,CAAC;AAED,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAMjB,KAAK,CAAC,CAAC,CAACkB,MAAM,CAAC,sBAAsB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}