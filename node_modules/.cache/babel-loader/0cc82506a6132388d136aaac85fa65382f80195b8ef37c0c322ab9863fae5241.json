{"ast":null,"code":"import{Response}from\"miragejs\";import dayjs from\"dayjs\";import jwt_decode from\"jwt-decode\";export var requiresAuth=function requiresAuth(request){var encodedToken=request.requestHeaders.authorization;var decodedToken=jwt_decode(encodedToken,process.env.REACT_APP_JWT_SECRET);if(decodedToken){var user=this.db.users.findBy({username:decodedToken.username});return user;}return new Response(401,{},{errors:[\"The token is invalid. Unauthorized access error.\"]});};export var formatDate=function formatDate(){return dayjs().format(\"YYYY-MM-DDTHH:mm:ssZ\");};","map":{"version":3,"names":["Response","dayjs","jwt_decode","requiresAuth","request","encodedToken","requestHeaders","authorization","decodedToken","process","env","REACT_APP_JWT_SECRET","user","db","users","findBy","username","errors","formatDate","format"],"sources":["C:/Users/Tilwani's/Desktop/The-Dilemma/src/backend/utils/authUtils.js"],"sourcesContent":["import { Response } from \"miragejs\";\nimport dayjs from \"dayjs\";\nimport jwt_decode from \"jwt-decode\";\n\nexport const requiresAuth = function (request) {\n  const encodedToken = request.requestHeaders.authorization;\n  const decodedToken = jwt_decode(\n    encodedToken,\n    process.env.REACT_APP_JWT_SECRET\n  );\n  if (decodedToken) {\n    const user = this.db.users.findBy({ username: decodedToken.username });\n    return user;\n  }\n  return new Response(\n    401,\n    {},\n    { errors: [\"The token is invalid. Unauthorized access error.\"] }\n  );\n};\n\nexport const formatDate = () => dayjs().format(\"YYYY-MM-DDTHH:mm:ssZ\");\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,UAAU,CACnC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,UAAU,KAAM,YAAY,CAEnC,MAAO,IAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAaC,OAAO,CAAE,CAC7C,GAAM,CAAAC,YAAY,CAAGD,OAAO,CAACE,cAAc,CAACC,aAAa,CACzD,GAAM,CAAAC,YAAY,CAAGN,UAAU,CAC7BG,YAAY,CACZI,OAAO,CAACC,GAAG,CAACC,oBACd,CAAC,CACD,GAAIH,YAAY,CAAE,CAChB,GAAM,CAAAI,IAAI,CAAG,IAAI,CAACC,EAAE,CAACC,KAAK,CAACC,MAAM,CAAC,CAAEC,QAAQ,CAAER,YAAY,CAACQ,QAAS,CAAC,CAAC,CACtE,MAAO,CAAAJ,IAAI,CACb,CACA,MAAO,IAAI,CAAAZ,QAAQ,CACjB,GAAG,CACH,CAAC,CAAC,CACF,CAAEiB,MAAM,CAAE,CAAC,kDAAkD,CAAE,CACjE,CAAC,CACH,CAAC,CAED,MAAO,IAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,QAAS,CAAAjB,KAAK,CAAC,CAAC,CAACkB,MAAM,CAAC,sBAAsB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}